(this.webpackJsonpsalesman=this.webpackJsonpsalesman||[]).push([[0],{54:function(e,t,r){},79:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r(0),o=r.n(c),s=r(27),i=r.n(s),a=(r(54),r(12)),u=r(11),l=function(){return Object(n.jsx)("div",{children:Object(n.jsx)("div",{children:"Not found"})})},d=r(3),j=r(31),b=r(2),h=r(4),O=function e(t){Object(b.a)(this,e),this.token=t},f=function(){function e(){Object(b.a)(this,e)}return Object(h.a)(e,[{key:"setAuth",value:function(e){this.setToken(e.token)}},{key:"getAuth",value:function(){var e=this.getToken();return""!==e?new O(e):null}},{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")||""}},{key:"removeAuth",value:function(){this.removeToken()}},{key:"removeToken",value:function(){localStorage.removeItem("token")}}]),e}(),p=function(){function e(){Object(b.a)(this,e),this.authLocalPersistent=new f}return Object(h.a)(e,[{key:"getAuth",value:function(){return this.authLocalPersistent.getAuth()}},{key:"setAuth",value:function(e){this.authLocalPersistent.setAuth(e)}},{key:"login",value:function(e,t){}},{key:"logout",value:function(){this.authLocalPersistent.removeAuth()}}]),e}(),v=function(){return new p},x=function(e){var t=e.component,r=Object(j.a)(e,["component"]),c=v();return Object(n.jsx)(u.b,Object(d.a)(Object(d.a)({},r),{},{render:function(e){return c.getAuth()?Object(n.jsx)(t,Object(d.a)({},e)):Object(n.jsx)(u.a,{to:"/login"})}}))},g=function(e){var t=e.component,r=Object(j.a)(e,["component"]),c=v(),o=Object(u.g)();return Object(n.jsx)(u.b,Object(d.a)(Object(d.a)({},r),{},{render:function(e){return c.getAuth()&&"/login"===o.location.pathname?Object(n.jsx)(u.a,{to:"/"}):Object(n.jsx)(t,Object(d.a)({},e))}}))},m=r(6),A=r(9),y=function(e){return Object(n.jsx)("div",{className:"flex flex-col flex-1 overflow-y-auto p-4",children:e.children})},w=function(e){return Object(n.jsx)("div",{className:"flex flex-col h-screen",children:e.children})},k=r(13),C=function(e){var t=Object(u.g)();return Object(n.jsxs)("div",{className:"flex h-16 bg-purple-600 justify-center",children:[Object(n.jsx)(P,{title:"Beranda",onClick:function(){console.log("%c beranda","color:yellow"),t.replace("/")},children:Object(n.jsx)(k.c,{color:"white"})}),Object(n.jsx)(P,{title:"Orderan",onClick:function(){console.log("%c orderan","color:yellow"),t.replace("/orders")},children:Object(n.jsx)(k.f,{color:"white"})}),Object(n.jsx)(P,{title:"Pelanggan",onClick:function(){console.log("%c customer","color:yellow"),t.replace("/customers")},children:Object(n.jsx)(k.h,{color:"white"})}),Object(n.jsx)(P,{title:"Catalog",onClick:function(){console.log("%c catalog","color:yellow"),t.replace("/catalogs")},children:Object(n.jsx)(k.b,{color:"white"})})]})},P=function(e){return Object(n.jsxs)("div",{onClick:e.onClick,className:"\r flex\r flex-col\r flex-1\r bg-purple-600 \r hover:bg-purple-700 \r focus:outline-none \r focus:ring-2 \r focus:ring-purple-600 \r focus:ring-opacity-50\r items-center\r justify-center\r ",children:[e.children,Object(n.jsx)("div",{className:"text-white text-center",children:e.title})]})},S=function(e){return Object(n.jsxs)("div",{className:"flex h-16 bg-purple-600 items-center px-2",children:[e.children,Object(n.jsx)("div",{children:e.left}),Object(n.jsx)("div",{className:"flex-1 items-center text-white px-2",children:e.title}),Object(n.jsx)("div",{children:e.right})]})},N=function(e){return Object(n.jsx)(n.Fragment,{children:e.data.map(e.render)})},I=r(10),L="SET_PRODUCTS",T="ADD_PRODUCT",R="CLEAR_PRODUCTS",E={products:[]},D=function(e){return{type:L,payload:e}},B=r(5),U=r.n(B),J=r(8),q=r(19),K=r(20),M=function e(t,r,n,c,o){Object(b.a)(this,e),this.id=t,this.name=r,this.price=n,this.stock=c,this.quantity=o},X=function(){function e(){Object(b.a)(this,e)}return Object(h.a)(e,null,[{key:"getProducts",value:function(){return this.products}},{key:"getProduct",value:function(e){return this.products.filter((function(t){return t.id===e}))[0]}}]),e}();X.products=[new M(1,"Good Day Mocacinno",2e3,100,1),new M(2,"Good Day Carrebian Nut",2e3,100,1),new M(3,"Good Day Original",2e3,100,1),new M(4,"Good Day Chococinno",2e3,100,1),new M(5,"Good Day Vanilla Latte",2e3,100,1),new M(6,"Nescafe Classic",2e3,100,1),new M(7,"Nescafe Original",2e3,100,1),new M(8,"Luwak White Koffie Original",2e3,100,1),new M(9,"Luwak White Koffie Caramel",2e3,100,1),new M(10,"Luwak White Koffie Mocca Rose",2e3,100,1)];var F=r(47),G=r.n(F),V=function e(){Object(b.a)(this,e),this.axios=void 0,this.baseUrl=void 0,this.axios=G.a,this.baseUrl="http://localhost"},Q=function(e){Object(q.a)(r,e);var t=Object(K.a)(r);function r(){return Object(b.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"getProducts",value:function(){var e=Object(J.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X.getProducts());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(V),W=function(){function e(){Object(b.a)(this,e),this.productApiService=new Q}return Object(h.a)(e,[{key:"getProducts",value:function(){return this.productApiService.getProducts()}}]),e}(),H=function(){function e(){Object(b.a)(this,e)}return Object(h.a)(e,[{key:"rupiah",value:function(e){var t=e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");return"".concat("Rp").concat(t)}}]),e}(),z=function(){return new H},_=function(){var e=new W,t=z(),r=Object(c.useState)(!1),o=Object(m.a)(r,2),s=o[0],i=o[1],a=Object(A.c)((function(e){return e.product.products})),u=Object(A.b)();return Object(c.useEffect)((function(){Promise.all([e.getProducts()]).then((function(e){var t=Object(m.a)(e,1)[0];u(D(t)),i(!1)})).catch((function(e){}))}),[]),s?Object(n.jsx)(w,{children:Object(n.jsx)(y,{children:Object(n.jsx)("div",{children:"loading..."})})}):Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Catalog"}),Object(n.jsx)(y,{children:Object(n.jsx)(N,{data:a,render:function(e,r){return Object(n.jsxs)("div",{className:"flex shadow mb-4 rounded p-2",children:[Object(n.jsx)("img",{className:"h-20 w-20 mr-2",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAMFBMVEXp7vG6vsG3u77s8fTCxsnn7O/f5OfFyczP09bM0dO8wMPk6ezY3eDd4uXR1tnJzdBvAX/cAAACVElEQVR4nO3b23KDIBRA0ShGU0n0//+2KmO94gWZ8Zxmr7fmwWEHJsJUHw8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwO1MHHdn+L3rIoK6eshsNJ8kTaJI07fERPOO1Nc1vgQm2oiBTWJ+d8+CqV1heplLzMRNonED+4mg7L6p591FC+133/xCRNCtd3nL9BlxWP++MOaXFdEXFjZ7r8D9l45C8y6aG0cWtP/SUGhs2d8dA/ZfGgrzYX+TVqcTNRRO9l+fS5eSYzQs85psUcuzk6igcLoHPz2J8gvzWaH/JLS+95RfOD8o1p5CU5R7l5LkfKEp0mQ1UX7hsVXqDpRrifILD/3S9CfmlUQFhQfuFu0STTyJ8gsP3PH7GVxN1FC4t2sbBy4TNRTu7LyHJbqaqKFw+/Q0ncFloo7CjRPwMnCWqKXQZ75El4nKC9dmcJaou9AXOE5UXbi+RGeJygrz8Uf+GewSn9uXuplnWDZJ7d8f24F/s6iq0LYf9olbS3Q8i5oKrRu4S9ybwaQ/aCkqtP3I28QDgeoK7TBya/aXqL5COx67PTCD2grtdOwH+pQV2r0a7YVBgZoKwwIVFQYG6ikMDVRTGByopjD8ATcKb0UhhRTe77sKs2DV7FKSjId18TUEBYVyLhUThWfILHTDqmI85/2RWWjcE/bhP6OD7maT3h20MHsA47JC3PsW0wcwLhv9t0OOPOIkCn21y2bXXwlyylxiYMPk1SuCSmpfK8bNQvIrpAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwNX4BCbAju9/X67UAAAAASUVORK5CYII="}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:e.name}),Object(n.jsx)("div",{children:t.rupiah(e.price)}),Object(n.jsx)("div",{children:e.quantity})]})]},r)}})}),Object(n.jsx)(C,{})]})},Y=function(e){return Object(n.jsx)("button",{type:"button",onClick:e.onClick,className:"\r bg-purple-600 \r hover:bg-purple-700 \r focus:outline-none \r focus:ring-2 \r focus:ring-purple-600 \r focus:ring-opacity-50\r rounded\r h-10\r px-4\r text-white\r shadow\r ",children:e.title})},Z=function(e){return Object(n.jsx)("div",{onClick:e.onClick,children:Object(n.jsx)(k.e,{color:"purple"})})},$=function(e){return Object(n.jsx)("div",{className:"\r hover:bg-purple-700 \r focus:outline-none \r focus:ring-2 \r focus:ring-purple-600 \r focus:ring-opacity-50\r p-2\r ",onClick:e.onClick,children:Object(n.jsx)(k.a,{color:"white"})})},ee=function(e){return Object(n.jsx)("div",{onClick:e.onClick,children:Object(n.jsx)(k.d,{color:e.color||"purple"})})},te=function(e){return Object(n.jsx)("div",{onClick:e.onClick,children:Object(n.jsx)(k.i,{color:e.color||"white"})})},re=function(e){return e.visible?Object(n.jsx)("div",{className:"\r bg-opacity-80\r absolute\r w-screen\r h-screen\r px-4\r py-8\r bg-gray-900\r flex\r flex-col\r justify-center\r ",children:Object(n.jsxs)("div",{className:"\r bg-white\r flex\r flex-col\r h-full\r rounded\r ",children:[Object(n.jsxs)("div",{className:"\r flex\r h8\r items-center\r border-b-2\r ",children:[Object(n.jsx)("div",{className:"flex-1 px-2",children:e.title}),Object(n.jsx)("div",{className:"p-4",children:Object(n.jsx)(te,{color:"purple",onClick:e.onClose})})]}),Object(n.jsx)("div",{className:"                        \r flex flex-col flex-1 overflow-y-auto p-4\r ",children:e.content})]})}):Object(n.jsx)("div",{})},ne=function e(t,r){Object(b.a)(this,e),this.product=t,this.quantity=r},ce="SET_CARTS",oe="SET_CART_ITEMS",se="ADD_CART_ITEM",ie="CLEAR_CART_ITEMS",ae={carts:[],cartItems:[]},ue=function(e){return{type:oe,payload:e}},le=function(){return{type:ie}},de=function e(t,r){Object(b.a)(this,e),this.id=t,this.name=r},je=function(){function e(){Object(b.a)(this,e)}return Object(h.a)(e,null,[{key:"getCustomers",value:function(){return this.customers}},{key:"getCustomer",value:function(e){return this.customers.filter((function(t){return t.id===e}))[0]}}]),e}();je.customers=[new de(1,"customer 1"),new de(2,"customer 2"),new de(3,"customer 3")];var be=function(e){Object(q.a)(r,e);var t=Object(K.a)(r);function r(){return Object(b.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"getCustomers",value:function(){var e=Object(J.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",je.getCustomers());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getCustomerById",value:function(){var e=Object(J.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCustomers();case 2:return e.abrupt("return",e.sent.filter((function(e){return e.id===t}))[0]);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(V),he=r(48),Oe=function(e){Object(q.a)(r,e);var t=Object(K.a)(r);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"network error, state offline";return Object(b.a)(this,r),t.call(this,e)}return r}(Object(he.a)(Error)),fe=function(){function e(){Object(b.a)(this,e),this.key="order_done"}return Object(h.a)(e,[{key:"getPurchases",value:function(){var e=localStorage.getItem(this.key);return e?JSON.parse(e):[]}},{key:"getPurchase",value:function(){throw new Error("Method not implemented.")}},{key:"getPurchaseById",value:function(e){return this.getPurchases().filter((function(t){return t.id===e}))[0]}},{key:"setPurchases",value:function(e){var t=this.getPurchases(),r=[].concat(Object(I.a)(t),Object(I.a)(e)),n=JSON.stringify(r);localStorage.setItem(this.key,n)}},{key:"setPurchase",value:function(e){var t=this.getPurchases(),r=[].concat(Object(I.a)(t),[e]),n=JSON.stringify(r);localStorage.setItem(this.key,n)}}]),e}(),pe=function e(t,r,n){Object(b.a)(this,e),this.id=t,this.customerId=r,this.orderItems=n},ve=function(){function e(){Object(b.a)(this,e)}return Object(h.a)(e,[{key:"getInternetState",value:function(){var e=Object(J.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://google.com",{mode:"no-cors"});case 3:return e.sent,e.abrupt("return","online");case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return","offline");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),xe=function(e){Object(q.a)(r,e);var t=Object(K.a)(r);function r(){var e;Object(b.a)(this,r);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).purchaseLocalPersistent=new fe,e.internetConnectionUtil=new ve,e}return Object(h.a)(r,[{key:"storeOrder",value:function(){var e=Object(J.a)(U.a.mark((function e(t){var r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("orderApiService",t),e.next=3,this.internetConnectionUtil.getInternetState();case 3:if("online"!==e.sent){e.next=9;break}r=new pe(Date.now(),t.customerId,t.orderItems),this.purchaseLocalPersistent.setPurchase(r),e.next=10;break;case 9:throw new Oe;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOrders",value:function(){var e=Object(J.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getPurchases",value:function(){var e=Object(J.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.purchaseLocalPersistent.getPurchases());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPurchase",value:function(){var e=Object(J.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.purchaseLocalPersistent.getPurchase());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(V),ge=function(){function e(){Object(b.a)(this,e)}return Object(h.a)(e,[{key:"setOrder",value:function(e){if(this.getOrders().filter((function(t){return t.id===e.id&&t.customerId==e.customerId})).length>0)console.log("specified order already exist");else{var t=[].concat(Object(I.a)(this.getOrders()),[e]);this.setOrders(t)}}},{key:"getOrder",value:function(){throw new Error("Method not implemented.")}},{key:"setOrders",value:function(e){var t=JSON.stringify(e);localStorage.setItem("orders",t)}},{key:"getOrders",value:function(){var e=localStorage.getItem("orders");return e?JSON.parse(e):[]}},{key:"removeOrder",value:function(e){var t=this.getOrders().filter((function(t){return t.id!==e.id&&t.customerId!==e.customerId}));console.log("removed, the rest",t),this.setOrders(t),console.log("orderLocalPersistent.removeOrder")}},{key:"getOrderById",value:function(e){return this.getOrders().filter((function(t){return t.id===e}))[0]}}]),e}(),me=function e(t,r){Object(b.a)(this,e),this.customerId=t,this.orderItems=r},Ae=function(){function e(){Object(b.a)(this,e),this.orderLocalPersistent=new ge,this.orderApiService=new xe,this.productApiService=new Q,this.customerApiService=new be,this.purchaseLocalPersistent=new fe}return Object(h.a)(e,[{key:"storeOrder",value:function(e){var t=this;console.log("store order",e);var r=new me(e.customerId,e.orderItems);return this.orderLocalPersistent.setOrder(e),this.orderApiService.storeOrder(r).then((function(r){console.log("%c order store to server succesfully","color:green"),t.orderLocalPersistent.removeOrder(e)})).catch((function(e){throw console.log("%c order store to server fail","color:red"),new Error("order failed, order store to local instead")})).finally((function(){}))}},{key:"getProducts",value:function(){return this.productApiService.getProducts()}},{key:"getCustomers",value:function(){return this.customerApiService.getCustomers()}},{key:"getOrderLocalPersistentById",value:function(){var e=Object(J.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.orderLocalPersistent.getOrderById(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOrdersLocalPersistent",value:function(){return this.orderLocalPersistent.getOrders()}},{key:"getPurchaseLocalPersistentById",value:function(){var e=Object(J.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.purchaseLocalPersistent.getPurchaseById(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPurchases",value:function(){return this.orderApiService.getPurchases()}}]),e}(),ye=function(){return new Ae},we=function(e){return Object(n.jsx)("div",{onClick:e.onClick,children:Object(n.jsx)(k.g,{color:e.color||"purple"})})},ke="SET_CUSTOMERS",Ce="ADD_CUSTOMER",Pe="CLEAR_CUSTOMERS",Se={customers:[]},Ne=function(e){return{type:ke,payload:e}},Ie=function(e){return Object(n.jsx)("div",{className:"\r border-t-2 \r flex\r flex-col\r p-3\r ",children:e.children})},Le=function e(t,r,n){Object(b.a)(this,e),this.id=t,this.product=r,this.quantity=n},Te=function(e){return e.visible?Object(n.jsx)("div",{className:"\r bg-opacity-80\r absolute\r w-screen\r h-screen\r px-4\r py-8\r bg-gray-900\r flex\r flex-col\r justify-center\r items-center\r ",children:Object(n.jsxs)("div",{className:"\r w-64\r max-w-xs\r bg-white\r flex\r flex-col\r rounded\r ",children:[Object(n.jsx)("div",{className:"\r flex\r flex-col\r h-12\r items-center\r justify-center\r border-b-2\r ",children:Object(n.jsx)("div",{className:"font-medium",children:e.title||"Alert Box"})}),Object(n.jsx)("div",{className:"                        \r flex flex-col flex-1 overflow-y-auto p-4\r ",children:e.content}),Object(n.jsx)("div",{className:"flex flex-col border-t-2 p-3",children:Object(n.jsx)(Y,{title:"Tutup",onClick:e.onClose})})]})}):Object(n.jsx)("div",{})},Re="SET_INTERNET_STATE",Ee={internetState:"online"},De=function(){var e,t=Object(u.g)(),r=ye(),o=new ve,s=z(),i=Object(c.useState)(!0),a=Object(m.a)(i,2),l=(a[0],a[1]),j=Object(c.useState)([]),b=Object(m.a)(j,2),h=(b[0],b[1],Object(c.useState)(!1)),O=Object(m.a)(h,2),f=O[0],p=O[1],v=Object(c.useState)(!1),x=Object(m.a)(v,2),g=x[0],k=x[1],C=Object(c.useState)(),P=Object(m.a)(C,2),L=P[0],T=P[1],R=Object(c.useState)(!1),E=Object(m.a)(R,2),B=E[0],U=E[1],J=Object(c.useState)(!1),q=Object(m.a)(J,2),K=q[0],M=q[1],X=Object(c.useState)(""),F=Object(m.a)(X,2),G=F[0],V=F[1],Q=Object(A.c)((function(e){return e.cart.cartItems})),W=Object(A.c)((function(e){return e.product.products})),H=Object(A.c)((function(e){return e.customer.customers})),_=Object(A.b)(),te=(Object(A.c)((function(e){return e.internetConnection.internetState})),function(e){T(e),p(!1)}),ce=function(e,t){var r=new ne(e,e.quantity);_({type:se,payload:r}),oe(t)},oe=function(e){W[e].quantity=1,_(D(Object(I.a)(W)))},ie=function(e){Q.splice(e,1),_(ue(Object(I.a)(Q)))},ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";M(e),V(t)};return Object(c.useEffect)((function(){Promise.all([r.getCustomers(),r.getProducts()]).then((function(e){var t=Object(m.a)(e,2),r=t[0],n=t[1];console.log(r),console.log(n),_(Ne(r)),_(D(n)),setTimeout((function(){l(!1)}),500)})).catch((function(e){console.log(e)})),o.getInternetState().then((function(e){console.log(e),_({type:Re,payload:e})})).catch((function(){}))}),[]),Object(n.jsxs)(w,{children:[Object(n.jsx)(Te,{title:"Kesalahan",visible:B,onClose:function(){U(!1)},content:Object(n.jsx)("div",{children:"Periksa kembali data pelanggan dan produk"})}),Object(n.jsx)(re,{visible:f,title:"Pilih Pelanggan",content:Object(n.jsx)("div",{children:Object(n.jsx)(N,{data:H,render:function(e,t){return Object(n.jsxs)("div",{onClick:function(){te(e)},className:"\r p-2 flex shadow mb-4\r hover:bg-purple-700 \r focus:outline-none \r focus:ring-2 \r focus:ring-purple-600 \r focus:ring-opacity-50\r ",children:[Object(n.jsx)("div",{className:"flex-1",children:e.name}),Object(n.jsx)(Y,{title:"Pilih",onClick:function(){te(e)}})]},t)}})}),onClose:function(){p(!1)}}),Object(n.jsx)(re,{visible:g,title:"Pilih Produk",content:Object(n.jsx)("div",{children:Object(n.jsx)(N,{data:W,render:function(e,t){return Object(n.jsxs)("div",{className:"p-2 shadow mb-4",children:[Object(n.jsx)("div",{className:"flex",children:Object(n.jsxs)("div",{className:"flex-1",children:[Object(n.jsx)("div",{children:e.name}),Object(n.jsx)("div",{children:s.rupiah(e.price)})]})}),Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsxs)("div",{className:"flex flex-1 items-center content-center",children:[Object(n.jsx)(ee,{onClick:function(){var r,n;console.log("button minus"),n=t,(r=e).quantity>1&&(r.quantity-=1,W[n]=r,_(D(Object(I.a)(W))))}}),Object(n.jsx)("div",{className:"flex p-2",children:e.quantity}),Object(n.jsx)(Z,{onClick:function(){var r,n;console.log("button add"),n=t,(r=e).quantity+=1,console.log(r),W[n]=r,_(D(Object(I.a)(W)))}})]}),Object(n.jsx)(Y,{title:"Tambah",onClick:function(){ce(e,t)}})]})]},t)}})}),onClose:function(){k(!1),function(){var e=W.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{quantity:1})}));_(D(Object(I.a)(e)))}()}}),Object(n.jsx)(Te,{title:"Buat Orderan",visible:K,onClose:function(){ae(!1)},content:Object(n.jsx)("div",{children:G})}),Object(n.jsx)(S,{title:"Buat Orderan",left:Object(n.jsx)($,{onClick:function(){_(le()),t.goBack()}})}),Object(n.jsxs)(y,{children:[Object(n.jsxs)("div",{className:"mb-4",children:[Object(n.jsx)("div",{className:"font-medium text-lg",children:"Pelanggan"}),Object(n.jsx)("div",{className:"shadow p-2 pb-10 mb-4",children:null!==(e=null===L||void 0===L?void 0:L.name)&&void 0!==e?e:"Pelanggan belum dipilih"}),Object(n.jsx)("div",{className:"flex",children:Object(n.jsx)(Y,{title:void 0==L?"Pilih Pelanggan":"Ganti Pelanggan",onClick:function(){p(!0)}})})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"font-medium text-lg",children:"Produk"}),Object(n.jsx)("div",{className:"w-screen mb-2",children:Object(n.jsx)(Y,{title:"Tambah Produk",onClick:function(){k(!0)}})}),Object(n.jsx)(N,{data:Q,render:function(e,t){return Object(n.jsxs)("div",{className:"flex mb-4 p-2 shadow",children:[Object(n.jsxs)("div",{className:"flex-1",children:[Object(n.jsx)("div",{children:e.product.name}),Object(n.jsx)("div",{children:e.product.price})]}),Object(n.jsxs)("div",{className:"flex p-2 items-center",children:[Object(n.jsx)(ee,{onClick:function(){var e;console.log("minus"),Q[e=t].quantity>1?(Q[e].quantity-=1,_(ue(Object(I.a)(Q)))):ie(e)}}),Object(n.jsx)("div",{className:"p-2",children:e.quantity}),Object(n.jsx)(Z,{onClick:function(){console.log("add"),Q[t].quantity+=1,_(ue(Object(I.a)(Q)))}}),Object(n.jsx)("div",{className:"p-2",children:Object(n.jsx)(we,{onClick:function(){console.log("%c remove","color:pink"),ie(t)}})})]})]},t)}})]})]}),Object(n.jsx)(Ie,{children:Object(n.jsx)(Y,{title:"Proses",onClick:function(){!function(){if(L&&Q.length>0){var e=Q.map((function(e){return new Le(1,e.product,e.quantity)})),t=new pe(Date.now(),null===L||void 0===L?void 0:L.id,e);r.storeOrder(t).then((function(e){T(void 0),_(le()),console.log("store order res",e),ae(!0,"Orderan sukses")})).catch((function(e){console.log("store order error",e),ae(!0,"Orderan Gagal,\n disimpan di lokal memory")}))}else L||console.log("customer not"),0===Q.length&&console.log("cart item is empty"),U(!0)}()}})})]})},Be=function(){function e(){Object(b.a)(this,e),this.customerApiService=new be}return Object(h.a)(e,[{key:"getCustomers",value:function(){var e=Object(J.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.customerApiService.getCustomers());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCustomerById",value:function(){var e=Object(J.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.customerApiService.getCustomerById(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ue=function(){return new Be},Je=function(){var e=Object(u.g)(),t=Ue(),r=(Object(u.i)(),Object(c.useState)()),o=Object(m.a)(r,2),s=o[0],i=o[1];return Object(c.useEffect)((function(){Promise.all([t.getCustomerById(1)]).then((function(e){var t=Object(m.a)(e,1)[0];i(t)})).catch((function(e){}))}),[]),Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Detil Pelanggan",left:Object(n.jsx)($,{onClick:function(){e.goBack()}})}),Object(n.jsx)(y,{children:Object(n.jsx)("div",{children:null===s||void 0===s?void 0:s.name})})]})},qe=function(){var e=Object(u.g)(),t=Ue(),r=Object(c.useState)(!1),o=Object(m.a)(r,2),s=o[0],i=o[1],a=Object(A.c)((function(e){return e.customer.customers})),l=Object(A.b)();return Object(c.useEffect)((function(){Promise.all([t.getCustomers()]).then((function(e){var t=Object(m.a)(e,1)[0];l(Ne(t)),setTimeout((function(){i(!1)}),300)})).catch((function(e){})).finally((function(){}))}),[]),s?Object(n.jsx)(w,{children:Object(n.jsx)(y,{children:Object(n.jsx)("div",{children:"loading..."})})}):Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Pelanggan"}),Object(n.jsx)(y,{children:Object(n.jsx)(N,{data:a,render:function(t,r){return Object(n.jsx)("div",{onClick:function(){e.push("/customers/"+t.id)},className:"shadow mb-4 p-2 rounded",children:Object(n.jsx)("div",{children:t.name})},r)}})}),Object(n.jsx)(C,{})]})},Ke=function(e){var t=z();return Object(n.jsxs)("div",{onClick:e.onClick,className:"rounded shadow mb-4 p-2",children:[Object(n.jsx)("div",{children:e.orderItem.product.name}),Object(n.jsx)("div",{children:t.rupiah(e.orderItem.product.price)}),Object(n.jsx)("div",{children:e.orderItem.quantity})]})},Me="SET_ORDERS",Xe="CLEAR_ORDERS",Fe="ADD_ORDER",Ge={orders:[]},Ve=function(e){return{type:Me,payload:e}},Qe=function(){function e(){Object(b.a)(this,e)}return Object(h.a)(e,null,[{key:"getOrders",value:function(){return this.orders}}]),e}();Qe.orders=[new pe(1,1,[new Le(1,X.getProduct(1),10),new Le(2,X.getProduct(3),10),new Le(3,X.getProduct(4),10)]),new pe(2,3,[new Le(4,X.getProduct(9),10),new Le(5,X.getProduct(10),10),new Le(6,X.getProduct(2),10)]),new pe(3,2,[new Le(7,X.getProduct(8),10),new Le(8,X.getProduct(7),10),new Le(9,X.getProduct(6),10)])];var We=function(){function e(){Object(b.a)(this,e)}return Object(h.a)(e,[{key:"setProfile",value:function(e){var t=JSON.stringify(e);console.log("profileString",t),localStorage.setItem("profile",t)}},{key:"getProfile",value:function(){var e=localStorage.getItem("profile");if(e)return JSON.parse(e);throw new Error}},{key:"removeProfile",value:function(){localStorage.removeItem("profile")}}]),e}(),He=function(){function e(){Object(b.a)(this,e),this.profileLocalPersistent=new We,this.orderApiService=new xe,this.orderLocalPersistent=new ge,this.authService=new p}return Object(h.a)(e,[{key:"getProfile",value:function(){return this.profileLocalPersistent.getProfile()}},{key:"getOrders",value:function(){return Qe.getOrders()}},{key:"getOrdersLocalPersistent",value:function(){return this.orderLocalPersistent.getOrders()}},{key:"storeOrder",value:function(){var e=Object(J.a)(U.a.mark((function e(t){var r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new me(t.customerId,t.orderItems),this.orderApiService.storeOrder(r);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(J.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.authService.logout();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ze=function(){var e=new He,t=(ye(),Object(u.g)()),r=Object(c.useState)(),o=Object(m.a)(r,2),s=o[0],i=o[1],a=Object(c.useState)([]),l=Object(m.a)(a,2),d=(l[0],l[1],Object(A.c)((function(e){return e.order.orders})),Object(A.b)());return Object(c.useEffect)((function(){!function(){var t=e.getOrdersLocalPersistent();d(Ve(t)),i(e.getProfile())}()}),[]),Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Home",right:Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"text-white",children:null===s||void 0===s?void 0:s.name})})}),Object(n.jsxs)(y,{children:[Object(n.jsx)(Y,{title:"logout",onClick:function(){e.logout().then((function(){t.push("/login")}))}}),Object(n.jsx)(N,{data:[],render:function(t,r){return Object(n.jsxs)("div",{className:"mb-8",children:[Object(n.jsx)(N,{data:t.orderItems,render:function(e,t){return Object(n.jsx)(Ke,{onClick:function(){},orderItem:e},t)}}),Object(n.jsx)(Y,{title:"checkout",onClick:function(){console.log(t.orderItems),e.storeOrder(t)}})]},r)}})]}),Object(n.jsx)(C,{})]})},_e=function e(t,r){Object(b.a)(this,e),this.username=t,this.password=r},Ye=function e(t,r){Object(b.a)(this,e),this.username=t,this.name=r},Ze=function(){function e(){Object(b.a)(this,e)}return Object(h.a)(e,[{key:"validate",value:function(e){console.log("%c validate: ".concat(e,", ").concat(typeof e),"color:yellow")}}]),e}(),$e=function(){function e(){Object(b.a)(this,e),this.authService=new p,this.validatorUtil=new Ze,this.profileLocalPersistent=new We}return Object(h.a)(e,[{key:"login",value:function(){var e=Object(J.a)(U.a.mark((function e(t,r){var n,c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.validatorUtil.validate(new _e(t,r)),n=new Ye(t,t),console.log("profile",n),this.profileLocalPersistent.setProfile(n),c=new O("token"),console.log("auth",c),this.authService.setAuth(c);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}]),e}(),et=function(){var e=new $e,t=Object(u.g)(),r=Object(c.useState)(""),o=Object(m.a)(r,2),s=o[0],i=o[1],a=Object(c.useState)(""),l=Object(m.a)(a,2),d=l[0],j=l[1];return Object(n.jsx)(w,{children:Object(n.jsxs)(y,{children:[Object(n.jsx)("div",{className:"flex items-center justify-center p-4",children:Object(n.jsx)("div",{className:"text-lg",children:"Login"})}),Object(n.jsxs)("div",{className:"mb-4",children:[Object(n.jsx)("label",{children:"username"}),Object(n.jsx)("input",{className:"border-2 rounded w-full h-10 px-2",onChange:function(e){i(e.target.value)}})]}),Object(n.jsxs)("div",{className:"mb-4",children:[Object(n.jsx)("label",{children:"Password"}),Object(n.jsx)("div",{children:Object(n.jsx)("input",{type:"password",className:"border-2 rounded w-full h-10 px-2",onChange:function(e){j(e.target.value)}})})]}),Object(n.jsx)("div",{className:"flex flex-col",children:Object(n.jsx)(Y,{title:"Login",onClick:function(){e.login(s,d).then((function(){t.push("/")})).catch((function(e){console.error(e)}))},children:"login"})})]})})},tt=function(){var e,t=Object(u.g)(),r=Object(u.i)(),o=Object(u.h)();console.log("location",o),console.log("query",new URLSearchParams(o.search).get("done")),console.log("params",r);var s=ye(),i=z(),a=Object(c.useState)(),l=Object(m.a)(a,2),d=l[0],j=l[1],b=Object(c.useState)(!1),h=Object(m.a)(b,2),O=h[0],f=h[1],p=function(e){return e?s.getPurchaseLocalPersistentById(+r.orderId):s.getOrderLocalPersistentById(+r.orderId)};return Object(c.useEffect)((function(){!function(){var e=new URLSearchParams(o.search).get("done");Promise.all([p("true"===e)]).then((function(e){var t=Object(m.a)(e,1)[0];console.log("_order",t),j(t),f(!1)})).catch((function(e){}))}()}),[]),O?Object(n.jsx)(w,{children:Object(n.jsx)(y,{children:Object(n.jsx)("div",{children:"loading..."})})}):Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Detil Orderan",left:Object(n.jsx)($,{onClick:function(){t.goBack()}})}),Object(n.jsxs)(y,{children:[Object(n.jsxs)("div",{children:["Orderan ",null===d||void 0===d?void 0:d.id]}),Object(n.jsxs)("div",{children:["Pelanggan ",null===d||void 0===d?void 0:d.customerId]}),Object(n.jsx)(N,{data:null!==(e=null===d||void 0===d?void 0:d.orderItems)&&void 0!==e?e:[],render:function(e,t){return Object(n.jsxs)("div",{className:"flex shadow mb-4 p-2",children:[Object(n.jsx)("img",{className:"h-20 w-20 mr-2",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAMFBMVEXp7vG6vsG3u77s8fTCxsnn7O/f5OfFyczP09bM0dO8wMPk6ezY3eDd4uXR1tnJzdBvAX/cAAACVElEQVR4nO3b23KDIBRA0ShGU0n0//+2KmO94gWZ8Zxmr7fmwWEHJsJUHw8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwO1MHHdn+L3rIoK6eshsNJ8kTaJI07fERPOO1Nc1vgQm2oiBTWJ+d8+CqV1heplLzMRNonED+4mg7L6p591FC+133/xCRNCtd3nL9BlxWP++MOaXFdEXFjZ7r8D9l45C8y6aG0cWtP/SUGhs2d8dA/ZfGgrzYX+TVqcTNRRO9l+fS5eSYzQs85psUcuzk6igcLoHPz2J8gvzWaH/JLS+95RfOD8o1p5CU5R7l5LkfKEp0mQ1UX7hsVXqDpRrifILD/3S9CfmlUQFhQfuFu0STTyJ8gsP3PH7GVxN1FC4t2sbBy4TNRTu7LyHJbqaqKFw+/Q0ncFloo7CjRPwMnCWqKXQZ75El4nKC9dmcJaou9AXOE5UXbi+RGeJygrz8Uf+GewSn9uXuplnWDZJ7d8f24F/s6iq0LYf9olbS3Q8i5oKrRu4S9ybwaQ/aCkqtP3I28QDgeoK7TBya/aXqL5COx67PTCD2grtdOwH+pQV2r0a7YVBgZoKwwIVFQYG6ikMDVRTGByopjD8ATcKb0UhhRTe77sKs2DV7FKSjId18TUEBYVyLhUThWfILHTDqmI85/2RWWjcE/bhP6OD7maT3h20MHsA47JC3PsW0wcwLhv9t0OOPOIkCn21y2bXXwlyylxiYMPk1SuCSmpfK8bNQvIrpAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwNX4BCbAju9/X67UAAAAASUVORK5CYII="}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:e.product.name}),Object(n.jsx)("div",{children:i.rupiah(e.product.price)}),Object(n.jsxs)("div",{children:[e.quantity," pc(s)"]})]})]},t)}})]})]})},rt=function(e){return Object(n.jsxs)("div",{onClick:e.onClick,className:"flex shadow mb-4 p-2",children:[Object(n.jsxs)("div",{className:"flex-1",children:[Object(n.jsx)("div",{children:(new Date).toDateString()}),Object(n.jsxs)("div",{children:["kode orderan ",e.order.id]}),Object(n.jsxs)("div",{children:[e.order.orderItems.length," jenis barang"]})]}),Object(n.jsx)("div",{className:"p-2",children:e.status})]})},nt=function(){var e=Object(u.g)(),t=ye(),r=Object(c.useState)([]),o=Object(m.a)(r,2),s=o[0],i=o[1];Object(A.c)((function(e){return e.order.orders})),Object(A.b)();return Object(c.useEffect)((function(){t.getPurchases().then((function(e){i(e)})).catch((function(e){console.log("get purchases from api failed")}))}),[]),Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Orderan Selesai",left:Object(n.jsx)($,{onClick:function(){e.goBack()}})}),Object(n.jsx)(y,{children:Object(n.jsx)(N,{data:s,render:function(t,r){return Object(n.jsx)(rt,{order:t,status:"terkirim",onClick:function(){console.log(t),e.push("/orders/"+t.id+"?done=true")}},r)}})})]})},ct=function(){var e=Object(u.g)(),t=ye(),r=(new URLSearchParams(Object(u.h)().search),Object(A.c)((function(e){return e.order.orders}))),o=Object(A.b)();return Object(c.useEffect)((function(){o(Ve(t.getOrdersLocalPersistent()))}),[]),Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Orderan Dalam Proses",left:Object(n.jsx)($,{onClick:function(){e.goBack()}})}),Object(n.jsx)(y,{children:Object(n.jsx)(N,{data:r,render:function(t,r){return Object(n.jsx)(rt,{order:t,status:"gagal",onClick:function(){console.log(t),e.push("/orders/"+t.id+"?done=false")}},r)}})})]})},ot=function(){var e=Object(u.g)();return Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Orderan"}),Object(n.jsxs)(y,{children:[Object(n.jsx)("div",{onClick:function(){e.push("/orders/create")},className:"\r p-2\r rounded\r shadow\r mb-4\r ",children:"Buat Orderan Baru"}),Object(n.jsx)("div",{onClick:function(){e.push("/orders/onprocess")},className:"\r p-2\r rounded\r shadow\r mb-4\r ",children:"Orderan Dalam Proses"}),Object(n.jsx)("div",{onClick:function(){e.push("/orders/done")},className:"\r p-2\r rounded\r shadow\r mb-4\r ",children:"Orderan Selesai"})]}),Object(n.jsx)(C,{})]})},st=function(){return Object(n.jsx)(a.a,{basename:"/",children:Object(n.jsxs)(u.d,{children:[Object(n.jsx)(x,{component:ze,path:"/",exact:!0}),Object(n.jsx)(x,{component:ot,path:"/orders",exact:!0}),Object(n.jsx)(x,{component:qe,path:"/customers",exact:!0}),Object(n.jsx)(x,{component:_,path:"/catalogs",exact:!0}),Object(n.jsx)(x,{component:De,path:"/orders/create",exact:!0}),Object(n.jsx)(x,{component:ct,path:"/orders/onprocess",exact:!0}),Object(n.jsx)(x,{component:nt,path:"/orders/done",exact:!0}),Object(n.jsx)(x,{component:tt,path:"/orders/:orderId",exact:!0}),Object(n.jsx)(x,{component:Je,path:"/customers/:customerId",exact:!0}),Object(n.jsx)(g,{component:et,path:"/login",exact:!0}),Object(n.jsx)(u.b,{component:l})]})})},it=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,80)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),o(e),s(e)}))},at=r(22),ut=Object(at.b)({cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ce:return Object(d.a)(Object(d.a)({},e),{},{carts:t.payload});case oe:return Object(d.a)(Object(d.a)({},e),{},{cartItems:t.payload});case se:return Object(d.a)(Object(d.a)({},e),{},{cartItems:[].concat(Object(I.a)(e.cartItems),[t.payload])});case ie:return console.log("clear cart items"),Object(d.a)(Object(d.a)({},e),{},{cartItems:[]});default:return e}},product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(d.a)(Object(d.a)({},e),{},{products:t.payload});case T:return Object(d.a)(Object(d.a)({},e),{},{products:[].concat(Object(I.a)(e.products),[t.payload])});case R:return Object(d.a)(Object(d.a)({},e),{},{products:[]});default:return e}},customer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ke:return Object(d.a)(Object(d.a)({},e),{},{customers:t.payload});case Ce:return Object(d.a)(Object(d.a)({},e),{},{customers:[].concat(Object(I.a)(e.customers),[t.payload])});case Pe:return Object(d.a)(Object(d.a)({},e),{},{customers:[]});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Me:return Object(d.a)(Object(d.a)({},e),{},{orders:t.payload});case Fe:return Object(d.a)(Object(d.a)({},e),{},{orders:[].concat(Object(I.a)(e.orders),[t.payload])});case Xe:return Object(d.a)(Object(d.a)({},e),{},{orders:[]});default:return e}},internetConnection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Re:return Object(d.a)(Object(d.a)({},e),{},{internetState:t.payload});default:return e}}}),lt=Object(at.c)(ut);i.a.render(Object(n.jsx)(A.a,{store:lt,children:Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(st,{})})}),document.getElementById("root")),it()}},[[79,1,2]]]);
//# sourceMappingURL=main.ec78c9cc.chunk.js.map