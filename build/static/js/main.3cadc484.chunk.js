(this.webpackJsonpsalesman=this.webpackJsonpsalesman||[]).push([[0],{50:function(e,t,c){},75:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c(0),o=c.n(r),i=c(25),s=c.n(i),a=(c(50),c(12)),u=c(9),l=function(){return Object(n.jsx)("div",{children:Object(n.jsx)("div",{children:"Not found"})})},j=c(3),d=c(28),b=c(2),O=c(4),f=function e(t){Object(b.a)(this,e),this.token=t},h=function(){function e(){Object(b.a)(this,e)}return Object(O.a)(e,[{key:"setAuth",value:function(e){this.setToken(e.token)}},{key:"getAuth",value:function(){var e=this.getToken();return""!==e?new f(e):null}},{key:"setToken",value:function(e){localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")||""}},{key:"removeAuth",value:function(){this.removeToken()}},{key:"removeToken",value:function(){localStorage.removeItem("token")}}]),e}(),x=function(){function e(){Object(b.a)(this,e),this.authLocalPersistent=new h}return Object(O.a)(e,[{key:"getAuth",value:function(){return this.authLocalPersistent.getAuth()}},{key:"setAuth",value:function(e){this.authLocalPersistent.setAuth(e)}},{key:"login",value:function(e,t){}}]),e}(),p=function(){return new x},v=function(e){var t=e.component,c=Object(d.a)(e,["component"]),r=p();return Object(n.jsx)(u.b,Object(j.a)(Object(j.a)({},c),{},{render:function(e){return r.getAuth()?Object(n.jsx)(t,Object(j.a)({},e)):Object(n.jsx)(u.a,{to:"/login"})}}))},m=function(e){var t=e.component,c=Object(d.a)(e,["component"]),r=p(),o=Object(u.g)();return Object(n.jsx)(u.b,Object(j.a)(Object(j.a)({},c),{},{render:function(e){return r.getAuth()&&"/login"===o.location.pathname?Object(n.jsx)(u.a,{to:"/"}):Object(n.jsx)(t,Object(j.a)({},e))}}))},g=c(5),A=c(8),y=function(e){return Object(n.jsx)("div",{className:"flex flex-col flex-1 overflow-y-auto p-4",children:e.children})},w=function(e){return Object(n.jsx)("div",{className:"flex flex-col h-screen",children:e.children})},k=c(13),C=function(e){var t=Object(u.g)();return Object(n.jsxs)("div",{className:"flex h-16 bg-purple-600 justify-center",children:[Object(n.jsx)(P,{title:"Beranda",onClick:function(){console.log("%c beranda","color:yellow"),t.replace("/")},children:Object(n.jsx)(k.c,{color:"white"})}),Object(n.jsx)(P,{title:"Orderan",onClick:function(){console.log("%c orderan","color:yellow"),t.replace("/orders")},children:Object(n.jsx)(k.f,{color:"white"})}),Object(n.jsx)(P,{title:"Pelanggan",onClick:function(){console.log("%c customer","color:yellow"),t.replace("/customers")},children:Object(n.jsx)(k.h,{color:"white"})}),Object(n.jsx)(P,{title:"Catalog",onClick:function(){console.log("%c catalog","color:yellow"),t.replace("/catalogs")},children:Object(n.jsx)(k.b,{color:"white"})})]})},P=function(e){return Object(n.jsxs)("div",{onClick:e.onClick,className:"\r flex\r flex-col\r flex-1\r bg-purple-600 \r hover:bg-purple-700 \r focus:outline-none \r focus:ring-2 \r focus:ring-purple-600 \r focus:ring-opacity-50\r items-center\r justify-center\r ",children:[e.children,Object(n.jsx)("div",{className:"text-white text-center",children:e.title})]})},S=function(e){return Object(n.jsxs)("div",{className:"flex h-16 bg-purple-600 items-center px-2",children:[e.children,Object(n.jsx)("div",{children:e.left}),Object(n.jsx)("div",{className:"flex-1 items-center text-white px-2",children:e.title}),Object(n.jsx)("div",{children:e.right})]})},N=function(e){return Object(n.jsx)(n.Fragment,{children:e.data.map(e.render)})},I=c(10),T="SET_PRODUCTS",R="ADD_PRODUCT",L="CLEAR_PRODUCTS",D={products:[]},E=function(e){return{type:T,payload:e}},B=c(7),U=c.n(B),q=c(11),J=c(22),K=c(21),M=function e(t,c,n,r,o){Object(b.a)(this,e),this.id=t,this.name=c,this.price=n,this.stock=r,this.quantity=o},X=function(){function e(){Object(b.a)(this,e)}return Object(O.a)(e,null,[{key:"getProducts",value:function(){return this.products}},{key:"getProduct",value:function(e){return this.products.filter((function(t){return t.id===e}))[0]}}]),e}();X.products=[new M(1,"Good Day Mocacinno",2e3,100,1),new M(2,"Good Day Carrebian Nut",2e3,100,1),new M(3,"Good Day Original",2e3,100,1),new M(4,"Good Day Chococinno",2e3,100,1),new M(5,"Good Day Vanilla Latte",2e3,100,1),new M(6,"Nescafe Classic",2e3,100,1),new M(7,"Nescafe Original",2e3,100,1),new M(8,"Luwak White Koffie Original",2e3,100,1),new M(9,"Luwak White Koffie Caramel",2e3,100,1),new M(10,"Luwak White Koffie Mocca Rose",2e3,100,1)];var F=c(44),V=c.n(F),G=function e(){Object(b.a)(this,e),this.axios=void 0,this.baseUrl=void 0,this.axios=V.a,this.baseUrl="http://localhost"},Q=function(e){Object(J.a)(c,e);var t=Object(K.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return Object(O.a)(c,[{key:"getProducts",value:function(){var e=Object(q.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",X.getProducts());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),c}(G),W=function(){function e(){Object(b.a)(this,e),this.productApiService=new Q}return Object(O.a)(e,[{key:"getProducts",value:function(){return this.productApiService.getProducts()}}]),e}(),H=function(){function e(){Object(b.a)(this,e)}return Object(O.a)(e,[{key:"rupiah",value:function(e){var t=e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,".");return"".concat("Rp").concat(t)}}]),e}(),z=function(){return new H},Y=function(){var e=new W,t=z(),c=Object(r.useState)(!1),o=Object(g.a)(c,2),i=o[0],s=o[1],a=Object(A.c)((function(e){return e.product.products})),u=Object(A.b)();return Object(r.useEffect)((function(){Promise.all([e.getProducts()]).then((function(e){var t=Object(g.a)(e,1)[0];u(E(t)),s(!1)})).catch((function(e){}))}),[]),i?Object(n.jsx)(w,{children:Object(n.jsx)(y,{children:Object(n.jsx)("div",{children:"loading..."})})}):Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Catalog"}),Object(n.jsx)(y,{children:Object(n.jsx)(N,{data:a,render:function(e,c){return Object(n.jsxs)("div",{className:"flex shadow mb-4 rounded p-2",children:[Object(n.jsx)("img",{className:"h-20 w-20 mr-2",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAMFBMVEXp7vG6vsG3u77s8fTCxsnn7O/f5OfFyczP09bM0dO8wMPk6ezY3eDd4uXR1tnJzdBvAX/cAAACVElEQVR4nO3b23KDIBRA0ShGU0n0//+2KmO94gWZ8Zxmr7fmwWEHJsJUHw8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwO1MHHdn+L3rIoK6eshsNJ8kTaJI07fERPOO1Nc1vgQm2oiBTWJ+d8+CqV1heplLzMRNonED+4mg7L6p591FC+133/xCRNCtd3nL9BlxWP++MOaXFdEXFjZ7r8D9l45C8y6aG0cWtP/SUGhs2d8dA/ZfGgrzYX+TVqcTNRRO9l+fS5eSYzQs85psUcuzk6igcLoHPz2J8gvzWaH/JLS+95RfOD8o1p5CU5R7l5LkfKEp0mQ1UX7hsVXqDpRrifILD/3S9CfmlUQFhQfuFu0STTyJ8gsP3PH7GVxN1FC4t2sbBy4TNRTu7LyHJbqaqKFw+/Q0ncFloo7CjRPwMnCWqKXQZ75El4nKC9dmcJaou9AXOE5UXbi+RGeJygrz8Uf+GewSn9uXuplnWDZJ7d8f24F/s6iq0LYf9olbS3Q8i5oKrRu4S9ybwaQ/aCkqtP3I28QDgeoK7TBya/aXqL5COx67PTCD2grtdOwH+pQV2r0a7YVBgZoKwwIVFQYG6ikMDVRTGByopjD8ATcKb0UhhRTe77sKs2DV7FKSjId18TUEBYVyLhUThWfILHTDqmI85/2RWWjcE/bhP6OD7maT3h20MHsA47JC3PsW0wcwLhv9t0OOPOIkCn21y2bXXwlyylxiYMPk1SuCSmpfK8bNQvIrpAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwNX4BCbAju9/X67UAAAAASUVORK5CYII="}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:e.name}),Object(n.jsx)("div",{children:t.rupiah(e.price)}),Object(n.jsx)("div",{children:e.quantity})]})]},c)}})}),Object(n.jsx)(C,{})]})},_=function(e){return Object(n.jsx)("button",{type:"button",onClick:e.onClick,className:"\r bg-purple-600 \r hover:bg-purple-700 \r focus:outline-none \r focus:ring-2 \r focus:ring-purple-600 \r focus:ring-opacity-50\r rounded\r h-10\r px-4\r text-white\r shadow\r ",children:e.title})},Z=function(e){return Object(n.jsx)("div",{onClick:e.onClick,children:Object(n.jsx)(k.e,{color:"purple"})})},$=function(e){return Object(n.jsx)("div",{className:"\r hover:bg-purple-700 \r focus:outline-none \r focus:ring-2 \r focus:ring-purple-600 \r focus:ring-opacity-50\r p-2\r ",onClick:e.onClick,children:Object(n.jsx)(k.a,{color:"white"})})},ee=function(e){return Object(n.jsx)("div",{onClick:e.onClick,children:Object(n.jsx)(k.d,{color:e.color||"purple"})})},te=function(e){return Object(n.jsx)("div",{onClick:e.onClick,children:Object(n.jsx)(k.i,{color:e.color||"white"})})},ce=function(e){return e.visible?Object(n.jsx)("div",{className:"\r bg-opacity-80\r absolute\r w-screen\r h-screen\r px-4\r py-8\r bg-gray-900\r flex\r flex-col\r justify-center\r ",children:Object(n.jsxs)("div",{className:"\r bg-white\r flex\r flex-col\r h-full\r rounded\r ",children:[Object(n.jsxs)("div",{className:"\r flex\r h8\r items-center\r border-b-2\r ",children:[Object(n.jsx)("div",{className:"flex-1 px-2",children:e.title}),Object(n.jsx)("div",{className:"p-4",children:Object(n.jsx)(te,{color:"purple",onClick:e.onClose})})]}),Object(n.jsx)("div",{className:"                        \r flex flex-col flex-1 overflow-y-auto p-4\r ",children:e.content})]})}):Object(n.jsx)("div",{})},ne=function e(t,c){Object(b.a)(this,e),this.product=t,this.quantity=c},re="SET_CARTS",oe="SET_CART_ITEMS",ie="ADD_CART_ITEM",se="CLEAR_CART_ITEMS",ae={carts:[],cartItems:[]},ue=function(e){return{type:oe,payload:e}},le=function(){return{type:se}},je=function e(t,c){Object(b.a)(this,e),this.id=t,this.name=c},de=function(){function e(){Object(b.a)(this,e)}return Object(O.a)(e,null,[{key:"getCustomers",value:function(){return this.customers}},{key:"getCustomer",value:function(e){return this.customers.filter((function(t){return t.id===e}))[0]}}]),e}();de.customers=[new je(1,"customer 1"),new je(2,"customer 2"),new je(3,"customer 3")];var be=function(e){Object(J.a)(c,e);var t=Object(K.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return Object(O.a)(c,[{key:"getCustomers",value:function(){var e=Object(q.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",de.getCustomers());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getCustomerById",value:function(){var e=Object(q.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCustomers();case 2:return e.abrupt("return",e.sent.filter((function(e){return e.id===t}))[0]);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),c}(G),Oe=function(e){Object(J.a)(c,e);var t=Object(K.a)(c);function c(){return Object(b.a)(this,c),t.apply(this,arguments)}return Object(O.a)(c,[{key:"storeOrder",value:function(){var e=Object(q.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("orderApiService",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),c}(G),fe=function(){function e(){Object(b.a)(this,e)}return Object(O.a)(e,[{key:"setOrder",value:function(e){if(this.getOrders().filter((function(t){return t.id===e.id&&t.customerId==e.customerId})).length>0)console.log("specified order already exist");else{var t=[].concat(Object(I.a)(this.getOrders()),[e]);this.setOrders(t)}}},{key:"getOrder",value:function(){throw new Error("Method not implemented.")}},{key:"setOrders",value:function(e){var t=JSON.stringify(e);localStorage.setItem("orders",t)}},{key:"getOrders",value:function(){var e=localStorage.getItem("orders");return e?JSON.parse(e):[]}},{key:"removeOrder",value:function(e){var t=this.getOrders().filter((function(t){return t.id===e.id&&t.customerId===e.customerId}));this.setOrders(t)}},{key:"getOrderById",value:function(e){return this.getOrders().filter((function(t){return t.id===e}))[0]}}]),e}(),he=function e(t,c){Object(b.a)(this,e),this.customerId=t,this.orderItems=c},xe=function(){function e(){Object(b.a)(this,e),this.orderLocalPersistent=new fe,this.orderApiService=new Oe,this.productApiService=new Q,this.customerApiService=new be}return Object(O.a)(e,[{key:"storeOrder",value:function(e){console.log("store order",e),this.orderLocalPersistent.setOrder(e);var t=new he(e.customerId,e.orderItems);return this.orderApiService.storeOrder(t).then((function(e){console.log("%c order store to server succesfully","color:green")})).catch((function(e){console.log("%c order store to server fail","color:red")})).finally((function(){}))}},{key:"getProducts",value:function(){return this.productApiService.getProducts()}},{key:"getCustomers",value:function(){return this.customerApiService.getCustomers()}},{key:"getOrderLocalPersistentById",value:function(){var e=Object(q.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.orderLocalPersistent.getOrderById(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getOrdersLocalPersistent",value:function(){return this.orderLocalPersistent.getOrders()}}]),e}(),pe=function(){return new xe},ve=function(e){return Object(n.jsx)("div",{onClick:e.onClick,children:Object(n.jsx)(k.g,{color:e.color||"purple"})})},me="SET_CUSTOMERS",ge="ADD_CUSTOMER",Ae="CLEAR_CUSTOMERS",ye={customers:[]},we=function(e){return{type:me,payload:e}},ke=function(e){return Object(n.jsx)("div",{className:"\r border-t-2 \r flex\r flex-col\r p-3\r ",children:e.children})},Ce=function e(t,c,n){Object(b.a)(this,e),this.id=t,this.customerId=c,this.orderItems=n},Pe=function e(t,c,n){Object(b.a)(this,e),this.id=t,this.product=c,this.quantity=n},Se=function(e){return e.visible?Object(n.jsx)("div",{className:"\r bg-opacity-80\r absolute\r w-screen\r h-screen\r px-4\r py-8\r bg-gray-900\r flex\r flex-col\r justify-center\r items-center\r ",children:Object(n.jsxs)("div",{className:"\r max-w-xs\r bg-white\r flex\r flex-col\r rounded\r ",children:[Object(n.jsx)("div",{className:"\r flex\r flex-col\r h-12\r items-center\r justify-center\r border-b-2\r ",children:Object(n.jsx)("div",{className:"font-medium",children:e.title||"Alert Box"})}),Object(n.jsx)("div",{className:"                        \r flex flex-col flex-1 overflow-y-auto p-4\r ",children:e.content}),Object(n.jsx)("div",{className:"flex flex-col border-t-2 p-3",children:Object(n.jsx)(_,{title:"Tutup",onClick:e.onClose})})]})}):Object(n.jsx)("div",{})},Ne=function(){var e,t=Object(u.g)(),c=pe(),o=z(),i=Object(r.useState)(!0),s=Object(g.a)(i,2),a=(s[0],s[1]),l=Object(r.useState)([]),d=Object(g.a)(l,2),b=(d[0],d[1],Object(r.useState)(!1)),O=Object(g.a)(b,2),f=O[0],h=O[1],x=Object(r.useState)(!1),p=Object(g.a)(x,2),v=p[0],m=p[1],k=Object(r.useState)(),C=Object(g.a)(k,2),P=C[0],T=C[1],R=Object(r.useState)(!1),L=Object(g.a)(R,2),D=L[0],B=L[1],U=Object(A.c)((function(e){return e.cart.cartItems})),q=Object(A.c)((function(e){return e.product.products})),J=Object(A.c)((function(e){return e.customer.customers})),K=Object(A.b)(),M=function(e){T(e),h(!1)},X=function(e,t){var c=new ne(e,e.quantity);K({type:ie,payload:c}),F(t)},F=function(e){q[e].quantity=1,K(E(Object(I.a)(q)))},V=function(e){U.splice(e,1),K(ue(Object(I.a)(U)))};return Object(r.useEffect)((function(){Promise.all([c.getCustomers(),c.getProducts()]).then((function(e){var t=Object(g.a)(e,2),c=t[0],n=t[1];console.log(c),console.log(n),K(we(c)),K(E(n)),setTimeout((function(){a(!1)}),500)})).catch((function(e){console.log(e)}))}),[]),Object(n.jsxs)(w,{children:[Object(n.jsx)(Se,{title:"Kesalahan",visible:D,onClose:function(){B(!1)},content:Object(n.jsx)("div",{children:"Periksa kembali data pelanggan dan produk"})}),Object(n.jsx)(ce,{visible:f,title:"Pilih Pelanggan",content:Object(n.jsx)("div",{children:Object(n.jsx)(N,{data:J,render:function(e,t){return Object(n.jsxs)("div",{onClick:function(){M(e)},className:"\r p-2 flex shadow mb-4\r hover:bg-purple-700 \r focus:outline-none \r focus:ring-2 \r focus:ring-purple-600 \r focus:ring-opacity-50\r ",children:[Object(n.jsx)("div",{className:"flex-1",children:e.name}),Object(n.jsx)(_,{title:"Pilih",onClick:function(){M(e)}})]},t)}})}),onClose:function(){h(!1)}}),Object(n.jsx)(ce,{visible:v,title:"Pilih Produk",content:Object(n.jsx)("div",{children:Object(n.jsx)(N,{data:q,render:function(e,t){return Object(n.jsxs)("div",{className:"p-2 shadow mb-4",children:[Object(n.jsx)("div",{className:"flex",children:Object(n.jsxs)("div",{className:"flex-1",children:[Object(n.jsx)("div",{children:e.name}),Object(n.jsx)("div",{children:o.rupiah(e.price)})]})}),Object(n.jsxs)("div",{className:"flex",children:[Object(n.jsxs)("div",{className:"flex flex-1 items-center content-center",children:[Object(n.jsx)(ee,{onClick:function(){var c,n;console.log("button minus"),n=t,(c=e).quantity>1&&(c.quantity-=1,q[n]=c,K(E(Object(I.a)(q))))}}),Object(n.jsx)("div",{className:"flex p-2",children:e.quantity}),Object(n.jsx)(Z,{onClick:function(){var c,n;console.log("button add"),n=t,(c=e).quantity+=1,console.log(c),q[n]=c,K(E(Object(I.a)(q)))}})]}),Object(n.jsx)(_,{title:"Tambah",onClick:function(){X(e,t)}})]})]},t)}})}),onClose:function(){m(!1),function(){var e=q.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{quantity:1})}));K(E(Object(I.a)(e)))}()}}),Object(n.jsx)(S,{title:"Buat Orderan",left:Object(n.jsx)($,{onClick:function(){K(le()),t.goBack()}})}),Object(n.jsxs)(y,{children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"font-medium text-lg",children:"Pelanggan"}),Object(n.jsx)("div",{children:null!==(e=null===P||void 0===P?void 0:P.name)&&void 0!==e?e:"Pelanggan belum dipilih"}),Object(n.jsx)("div",{className:"flex",children:Object(n.jsx)(_,{title:"Pilih Pelanggan",onClick:function(){h(!0)}})})]}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:"font-medium text-lg",children:"Produk"}),Object(n.jsx)("div",{className:"w-screen",children:Object(n.jsx)(_,{title:"Tambah Produk",onClick:function(){m(!0)}})}),Object(n.jsx)(N,{data:U,render:function(e,t){return Object(n.jsxs)("div",{className:"flex mb-4 p-2 shadow",children:[Object(n.jsxs)("div",{className:"flex-1",children:[Object(n.jsx)("div",{children:e.product.name}),Object(n.jsx)("div",{children:e.product.price})]}),Object(n.jsxs)("div",{className:"flex p-2 items-center",children:[Object(n.jsx)(ee,{onClick:function(){var e;console.log("minus"),U[e=t].quantity>1?(U[e].quantity-=1,K(ue(Object(I.a)(U)))):V(e)}}),Object(n.jsx)("div",{className:"p-2",children:e.quantity}),Object(n.jsx)(Z,{onClick:function(){console.log("add"),U[t].quantity+=1,K(ue(Object(I.a)(U)))}}),Object(n.jsx)("div",{className:"p-2",children:Object(n.jsx)(ve,{onClick:function(){console.log("%c remove","color:pink"),V(t)}})})]})]},t)}})]})]}),Object(n.jsx)(ke,{children:Object(n.jsx)(_,{title:"Proses",onClick:function(){!function(){if(P&&U.length>0){var e=U.map((function(e){return new Pe(1,e.product,e.quantity)})),t=new Ce(Date.now(),null===P||void 0===P?void 0:P.id,e);c.storeOrder(t).then((function(){T(void 0),K(le())})).catch((function(e){}))}else P||console.log("customer not"),0===U.length&&console.log("cart item is empty"),B(!0)}()}})})]})},Ie=function(){function e(){Object(b.a)(this,e),this.customerApiService=new be}return Object(O.a)(e,[{key:"getCustomers",value:function(){var e=Object(q.a)(U.a.mark((function e(){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.customerApiService.getCustomers());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCustomerById",value:function(){var e=Object(q.a)(U.a.mark((function e(t){return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.customerApiService.getCustomerById(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Te=function(){return new Ie},Re=function(){var e=Object(u.g)(),t=Te(),c=(Object(u.i)(),Object(r.useState)()),o=Object(g.a)(c,2),i=o[0],s=o[1];return Object(r.useEffect)((function(){Promise.all([t.getCustomerById(1)]).then((function(e){var t=Object(g.a)(e,1)[0];s(t)})).catch((function(e){}))}),[]),Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Detil Pelanggan",left:Object(n.jsx)($,{onClick:function(){e.goBack()}})}),Object(n.jsx)(y,{children:Object(n.jsx)("div",{children:null===i||void 0===i?void 0:i.name})})]})},Le=function(){var e=Object(u.g)(),t=Te(),c=Object(r.useState)(!1),o=Object(g.a)(c,2),i=o[0],s=o[1],a=Object(A.c)((function(e){return e.customer.customers})),l=Object(A.b)();return Object(r.useEffect)((function(){Promise.all([t.getCustomers()]).then((function(e){var t=Object(g.a)(e,1)[0];l(we(t)),setTimeout((function(){s(!1)}),300)})).catch((function(e){})).finally((function(){}))}),[]),i?Object(n.jsx)(w,{children:Object(n.jsx)(y,{children:Object(n.jsx)("div",{children:"loading..."})})}):Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Pelanggan"}),Object(n.jsx)(y,{children:Object(n.jsx)(N,{data:a,render:function(t,c){return Object(n.jsx)("div",{onClick:function(){e.push("/customers/"+t.id)},className:"shadow mb-4 p-2 rounded",children:Object(n.jsx)("div",{children:t.name})},c)}})}),Object(n.jsx)(C,{})]})},De=function(e){var t=z();return Object(n.jsxs)("div",{onClick:e.onClick,className:"rounded shadow mb-4 p-2",children:[Object(n.jsx)("div",{children:e.orderItem.product.name}),Object(n.jsx)("div",{children:t.rupiah(e.orderItem.product.price)}),Object(n.jsx)("div",{children:e.orderItem.quantity})]})},Ee="SET_ORDERS",Be="CLEAR_ORDERS",Ue="ADD_ORDER",qe={orders:[]},Je=function(e){return{type:Ee,payload:e}},Ke=function(){function e(){Object(b.a)(this,e)}return Object(O.a)(e,null,[{key:"getOrders",value:function(){return this.orders}}]),e}();Ke.orders=[new Ce(1,1,[new Pe(1,X.getProduct(1),10),new Pe(2,X.getProduct(3),10),new Pe(3,X.getProduct(4),10)]),new Ce(2,3,[new Pe(4,X.getProduct(9),10),new Pe(5,X.getProduct(10),10),new Pe(6,X.getProduct(2),10)]),new Ce(3,2,[new Pe(7,X.getProduct(8),10),new Pe(8,X.getProduct(7),10),new Pe(9,X.getProduct(6),10)])];var Me=function(){function e(){Object(b.a)(this,e)}return Object(O.a)(e,[{key:"setProfile",value:function(e){var t=JSON.stringify(e);console.log("profileString",t),localStorage.setItem("profile",t)}},{key:"getProfile",value:function(){var e=localStorage.getItem("profile");if(e)return JSON.parse(e);throw new Error}},{key:"removeProfile",value:function(){localStorage.removeItem("profile")}}]),e}(),Xe=function(){function e(){Object(b.a)(this,e),this.profileLocalPersistent=new Me,this.orderApiService=new Oe,this.orderLocalPersistent=new fe}return Object(O.a)(e,[{key:"getProfile",value:function(){return this.profileLocalPersistent.getProfile()}},{key:"getOrders",value:function(){return Ke.getOrders()}},{key:"getOrdersLocalPersistent",value:function(){return this.orderLocalPersistent.getOrders()}},{key:"storeOrder",value:function(){var e=Object(q.a)(U.a.mark((function e(t){var c;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=new he(t.customerId,t.orderItems),this.orderApiService.storeOrder(c);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Fe=function(){var e=new Xe,t=(pe(),Object(r.useState)()),c=Object(g.a)(t,2),o=c[0],i=c[1],s=Object(r.useState)([]),a=Object(g.a)(s,2),u=(a[0],a[1]),l=Object(A.c)((function(e){return e.order.orders})),j=Object(A.b)();return Object(r.useEffect)((function(){i(e.getProfile()),u(e.getOrders()),function(){var t=e.getOrdersLocalPersistent();j(Je(t))}()}),[]),Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Home",right:Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"text-white",children:null===o||void 0===o?void 0:o.name})})}),Object(n.jsx)(y,{children:Object(n.jsx)(N,{data:l,render:function(t,c){return Object(n.jsxs)("div",{className:"mb-8",children:[Object(n.jsx)(N,{data:t.orderItems,render:function(e,t){return Object(n.jsx)(De,{onClick:function(){},orderItem:e},t)}}),Object(n.jsx)(_,{title:"checkout",onClick:function(){console.log(t.orderItems),e.storeOrder(t)}})]},c)}})}),Object(n.jsx)(C,{})]})},Ve=function e(t,c){Object(b.a)(this,e),this.username=t,this.password=c},Ge=function e(t,c){Object(b.a)(this,e),this.username=t,this.name=c},Qe=function(){function e(){Object(b.a)(this,e)}return Object(O.a)(e,[{key:"validate",value:function(e){console.log("%c validate: ".concat(e,", ").concat(typeof e),"color:yellow")}}]),e}(),We=function(){function e(){Object(b.a)(this,e),this.authService=new x,this.validatorUtil=new Qe,this.profileLocalPersistent=new Me}return Object(O.a)(e,[{key:"login",value:function(){var e=Object(q.a)(U.a.mark((function e(t,c){var n,r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.validatorUtil.validate(new Ve(t,c)),n=new Ge(t,t),console.log("profile",n),this.profileLocalPersistent.setProfile(n),r=new f("token"),console.log("auth",r),this.authService.setAuth(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t,c){return e.apply(this,arguments)}}()}]),e}(),He=function(){var e=new We,t=Object(u.g)(),c=Object(r.useState)(""),o=Object(g.a)(c,2),i=o[0],s=o[1],a=Object(r.useState)(""),l=Object(g.a)(a,2),j=l[0],d=l[1];return Object(n.jsx)(w,{children:Object(n.jsxs)(y,{children:[Object(n.jsx)("div",{children:"Login"}),Object(n.jsx)("label",{children:"username"}),Object(n.jsx)("div",{children:Object(n.jsx)("input",{className:"border-2 rounded",onChange:function(e){s(e.target.value)}})}),Object(n.jsxs)("div",{children:[Object(n.jsx)("label",{children:"password"}),Object(n.jsx)("div",{children:Object(n.jsx)("input",{className:"border-2 rounded",onChange:function(e){d(e.target.value)}})})]}),Object(n.jsx)("div",{children:Object(n.jsx)(_,{title:"Login",onClick:function(){e.login(i,j).then((function(){t.push("/")})).catch((function(e){console.error(e)}))},children:"login"})})]})})},ze=function(){var e,t=Object(u.g)(),c=Object(u.i)(),o=Object(u.h)();console.log("location",o),console.log("query",new URLSearchParams(o.search).get("done")),console.log("params",c);var i=pe(),s=z(),a=Object(r.useState)(),l=Object(g.a)(a,2),j=l[0],d=l[1],b=Object(r.useState)(!1),O=Object(g.a)(b,2),f=O[0],h=O[1];return Object(r.useEffect)((function(){Promise.all([i.getOrderLocalPersistentById(+c.orderId)]).then((function(e){var t=Object(g.a)(e,1)[0];d(t),h(!1)})).catch((function(e){}))}),[]),f?Object(n.jsx)(w,{children:Object(n.jsx)(y,{children:Object(n.jsx)("div",{children:"loading..."})})}):Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Detil Orderan",left:Object(n.jsx)($,{onClick:function(){t.goBack()}})}),Object(n.jsxs)(y,{children:[Object(n.jsxs)("div",{children:["Orderan ",null===j||void 0===j?void 0:j.id]}),Object(n.jsxs)("div",{children:["Pelanggan ",null===j||void 0===j?void 0:j.customerId]}),Object(n.jsx)(N,{data:null!==(e=null===j||void 0===j?void 0:j.orderItems)&&void 0!==e?e:[],render:function(e,t){return Object(n.jsxs)("div",{className:"flex shadow mb-4 p-2",children:[Object(n.jsx)("img",{className:"h-20 w-20 mr-2",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAMFBMVEXp7vG6vsG3u77s8fTCxsnn7O/f5OfFyczP09bM0dO8wMPk6ezY3eDd4uXR1tnJzdBvAX/cAAACVElEQVR4nO3b23KDIBRA0ShGU0n0//+2KmO94gWZ8Zxmr7fmwWEHJsJUHw8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwO1MHHdn+L3rIoK6eshsNJ8kTaJI07fERPOO1Nc1vgQm2oiBTWJ+d8+CqV1heplLzMRNonED+4mg7L6p591FC+133/xCRNCtd3nL9BlxWP++MOaXFdEXFjZ7r8D9l45C8y6aG0cWtP/SUGhs2d8dA/ZfGgrzYX+TVqcTNRRO9l+fS5eSYzQs85psUcuzk6igcLoHPz2J8gvzWaH/JLS+95RfOD8o1p5CU5R7l5LkfKEp0mQ1UX7hsVXqDpRrifILD/3S9CfmlUQFhQfuFu0STTyJ8gsP3PH7GVxN1FC4t2sbBy4TNRTu7LyHJbqaqKFw+/Q0ncFloo7CjRPwMnCWqKXQZ75El4nKC9dmcJaou9AXOE5UXbi+RGeJygrz8Uf+GewSn9uXuplnWDZJ7d8f24F/s6iq0LYf9olbS3Q8i5oKrRu4S9ybwaQ/aCkqtP3I28QDgeoK7TBya/aXqL5COx67PTCD2grtdOwH+pQV2r0a7YVBgZoKwwIVFQYG6ikMDVRTGByopjD8ATcKb0UhhRTe77sKs2DV7FKSjId18TUEBYVyLhUThWfILHTDqmI85/2RWWjcE/bhP6OD7maT3h20MHsA47JC3PsW0wcwLhv9t0OOPOIkCn21y2bXXwlyylxiYMPk1SuCSmpfK8bNQvIrpAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwNX4BCbAju9/X67UAAAAASUVORK5CYII="}),Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:e.product.name}),Object(n.jsx)("div",{children:s.rupiah(e.product.price)}),Object(n.jsxs)("div",{children:[e.quantity," pc(s)"]})]})]},t)}})]})]})},Ye=function(e){return Object(n.jsxs)("div",{onClick:e.onClick,className:"flex shadow mb-4 p-2",children:[Object(n.jsxs)("div",{className:"flex-1",children:[Object(n.jsx)("div",{children:(new Date).toDateString()}),Object(n.jsxs)("div",{children:["kode orderan ",e.order.id]}),Object(n.jsxs)("div",{children:[e.order.orderItems.length," jenis barang"]})]}),Object(n.jsx)("div",{className:"p-2",children:"status"})]})},_e=function(){var e=Object(u.g)(),t=pe(),c=Object(r.useState)([]),o=Object(g.a)(c,2),i=o[0],s=(o[1],Object(A.c)((function(e){return e.order.orders})),Object(A.b)());return Object(r.useEffect)((function(){s(Je(t.getOrdersLocalPersistent()))}),[]),Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Orderan Selesai",left:Object(n.jsx)($,{onClick:function(){e.goBack()}})}),Object(n.jsx)(y,{children:Object(n.jsx)(N,{data:i,render:function(t,c){return Object(n.jsx)(Ye,{order:t,onClick:function(){console.log(t),e.push("/orders/"+t.id+"?done=true")}},c)}})})]})},Ze=function(){var e=Object(u.g)(),t=pe(),c=(new URLSearchParams(Object(u.h)().search),Object(A.c)((function(e){return e.order.orders}))),o=Object(A.b)();return Object(r.useEffect)((function(){o(Je(t.getOrdersLocalPersistent()))}),[]),Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Orderan Dalam Proses",left:Object(n.jsx)($,{onClick:function(){e.goBack()}})}),Object(n.jsx)(y,{children:Object(n.jsx)(N,{data:c,render:function(t,c){return Object(n.jsx)(Ye,{order:t,onClick:function(){console.log(t),e.push("/orders/"+t.id+"?done=false")}},c)}})})]})},$e=function(){var e=Object(u.g)();return Object(n.jsxs)(w,{children:[Object(n.jsx)(S,{title:"Orderan"}),Object(n.jsxs)(y,{children:[Object(n.jsx)("div",{onClick:function(){e.push("/orders/create")},className:"\r p-2\r rounded\r shadow\r mb-4\r ",children:"Buat Orderan Baru"}),Object(n.jsx)("div",{onClick:function(){e.push("/orders/onprocess")},className:"\r p-2\r rounded\r shadow\r mb-4\r ",children:"Orderan Dalam Proses"}),Object(n.jsx)("div",{onClick:function(){e.push("/orders/done")},className:"\r p-2\r rounded\r shadow\r mb-4\r ",children:"Orderan Selesai"})]}),Object(n.jsx)(C,{})]})},et=function(){return Object(n.jsx)(a.a,{basename:"/",children:Object(n.jsxs)(u.d,{children:[Object(n.jsx)(v,{component:Fe,path:"/",exact:!0}),Object(n.jsx)(v,{component:$e,path:"/orders",exact:!0}),Object(n.jsx)(v,{component:Le,path:"/customers",exact:!0}),Object(n.jsx)(v,{component:Y,path:"/catalogs",exact:!0}),Object(n.jsx)(v,{component:Ne,path:"/orders/create",exact:!0}),Object(n.jsx)(v,{component:Ze,path:"/orders/onprocess",exact:!0}),Object(n.jsx)(v,{component:_e,path:"/orders/done",exact:!0}),Object(n.jsx)(v,{component:ze,path:"/orders/:orderId",exact:!0}),Object(n.jsx)(v,{component:Re,path:"/customers/:customerId",exact:!0}),Object(n.jsx)(m,{component:He,path:"/login",exact:!0}),Object(n.jsx)(u.b,{component:l})]})})},tt=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,76)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;c(e),n(e),r(e),o(e),i(e)}))},ct=c(20),nt=Object(ct.b)({cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return Object(j.a)(Object(j.a)({},e),{},{carts:t.payload});case oe:return Object(j.a)(Object(j.a)({},e),{},{cartItems:t.payload});case ie:return Object(j.a)(Object(j.a)({},e),{},{cartItems:[].concat(Object(I.a)(e.cartItems),[t.payload])});case se:return console.log("clear cart items"),Object(j.a)(Object(j.a)({},e),{},{cartItems:[]});default:return e}},product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(j.a)(Object(j.a)({},e),{},{products:t.payload});case R:return Object(j.a)(Object(j.a)({},e),{},{products:[].concat(Object(I.a)(e.products),[t.payload])});case L:return Object(j.a)(Object(j.a)({},e),{},{products:[]});default:return e}},customer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return Object(j.a)(Object(j.a)({},e),{},{customers:t.payload});case ge:return Object(j.a)(Object(j.a)({},e),{},{customers:[].concat(Object(I.a)(e.customers),[t.payload])});case Ae:return Object(j.a)(Object(j.a)({},e),{},{customers:[]});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return Object(j.a)(Object(j.a)({},e),{},{orders:t.payload});case Ue:return Object(j.a)(Object(j.a)({},e),{},{orders:[].concat(Object(I.a)(e.orders),[t.payload])});case Be:return Object(j.a)(Object(j.a)({},e),{},{orders:[]});default:return e}}}),rt=Object(ct.c)(nt);s.a.render(Object(n.jsx)(A.a,{store:rt,children:Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(et,{})})}),document.getElementById("root")),tt()}},[[75,1,2]]]);
//# sourceMappingURL=main.3cadc484.chunk.js.map